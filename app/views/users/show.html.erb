<script src="//maps.google.com/maps/api/js?key=AIzaSyDAxvAmajtrT4U223Mxs6Ye86gpROQKAXU"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->

<div class="col-sm-2"></div>
<div class="col-sm-8" style="text-align: center">
  <div class="post-full panel panel-default">
    <table>
      <tr>
        <td class="profile-left-bar">
          <div class="profile-avatar"><%= image_tag @user.avatar, class: "profile-avatar" %></div>
          <br>
          <h1><%= @user.name %></h1>
        </td>
        <td class="profile-center-bar">
          <% if @user.posts.any? %>
             <h3>Posts (<%= @user.posts.count %>)</h3>
               <% @user.posts.each do |post|%>
                <p><span class="title"><%= link_to post.title, post %></span>
                <span class="timestamp">
                  Posted <%= time_ago_in_words(post.created_at) %> ago.
                </span></p>
              <% end %>
             <%= will_paginate @posts %>
           <% end %>
         </div>
         <%= @user.latitude%>

         <div style='width: 800px;'>
           <div id="map" style='width: 800px; height: 400px;'></div>
         </div>

         <script>
         handler = Gmaps.build('Google');
         handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
         markers = handler.addMarkers([
           {
             "lat": 0,
             "lng": 0,
             "picture": {
               "url": "http://people.mozilla.com/~faaborg/files/shiretoko/firefoxIcon/firefox-32.png",
               "width":  32,
               "height": 32
             },
             "infowindow": "hello!"
           }
         ]);
         handler.bounds.extendWith(markers);
         handler.fitMapToBounds();
         });
         </script>


       </td>
      </tr>
    </table>
  </div>
</div>
<div class="col-sm-2"></div>
